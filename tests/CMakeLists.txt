file(GLOB UNIT_TESTS unit/test_*.c)
foreach(ut ${UNIT_TESTS})
    get_filename_component(name ${ut} NAME_WE)
    add_executable(${name} ${ut})
    target_link_libraries(${name} PRIVATE rogue_core)
    add_test(NAME ${name} COMMAND ${name})
endforeach()

file(GLOB INTEGRATION_TESTS integration/test_*.c)
foreach(it ${INTEGRATION_TESTS})
    get_filename_component(name ${it} NAME_WE)
    add_executable(${name} ${it})
    target_link_libraries(${name} PRIVATE rogue_core)
    if(ROGUE_ENABLE_SDL)
        add_test(NAME ${name} COMMAND ${name})
        set_tests_properties(${name} PROPERTIES ENVIRONMENT "SDL_VIDEODRIVER=dummy")
    else()
        add_test(NAME ${name} COMMAND ${name})
    endif()
endforeach()
